{"version":3,"sources":["components/Header/Header.js","components/SearchBox/SearchBox.js","components/MovieItem/MovieItem.js","components/Movies/Movies.js","components/Favorites/Favorites.js","pages/MainPage/MainPage.js","pages/ListPage/ListPage.js","App.js","index.js"],"names":["Header","className","class","Component","SearchBox","searchBoxSubmitHandler","e","preventDefault","props","onClickProp","onSubmit","this","value","searchLine","type","placeholder","onChange","onChangeProp","disabled","MovieItem","Title","Year","Poster","src","alt","onClick","addtoFavPropLittle","Movies","undefined","moviesFromTop","map","movie","key","imdbID","addtoFavProp","Favorites","state","title","serverIdForList","setNameFavoriteList","setState","target","sendPostQuery","fetch","method","headers","body","JSON","stringify","movies","m","then","resp","json","da","console","log","id","item","idx","deleteprop","to","MainPage","favorites","searchLineChangeHandler","setMovies","data","onClickFunc","response","Search","catch","err","addToFavorite","find","movieNew","newFav","deleteFromFavorite","newArr","splice","ListPage","name","match","params","mass","res","Promise","all","href","App","path","exact","component","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.eba71d0f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Header.css\";\n\nclass Header extends Component {\n  render() {\n    return (\n      <header className=\"header\">\n        <h1 className=\"header__title\">\n          Mouviek <span class=\"moto\">Create your own film list</span>\n        </h1>\n      </header>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport \"./SearchBox.css\";\n\nclass SearchBox extends Component {\n  searchBoxSubmitHandler = e => {\n    e.preventDefault();\n    this.props.onClickProp();\n  };\n\n  render() {\n    return (\n      <div className=\"search-box\">\n        <form\n          className=\"search-box__form\"\n          onSubmit={this.searchBoxSubmitHandler}\n        >\n          <label className=\"search-box__form-label\">\n            Искать фильм по названию:\n            <input\n              value={this.props.searchLine}\n              type=\"text\"\n              className=\"search-box__form-input\"\n              placeholder=\"Например, Matrix\"\n              onChange={this.props.onChangeProp}\n            />\n          </label>\n          <button\n            type=\"submit\"\n            className=\"search-box__form-submit\"\n            disabled={!this.props.searchLine}\n          >\n            Искать\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SearchBox;\n","import React, { Component } from \"react\";\nimport \"./MovieItem.css\";\n\nclass MovieItem extends Component {\n  render() {\n    const { Title, Year, Poster } = this.props;\n    return (\n      <article className=\"movie-item\">\n        <img className=\"movie-item__poster\" src={Poster} alt={Title} />\n        <div className=\"movie-item__info\">\n          <h3 className=\"movie-item__title\">\n            {Title}&nbsp;({Year})\n          </h3>\n          <button\n            type=\"button\"\n            className=\"movie-item__add-button\"\n            onClick={this.props.addtoFavPropLittle}\n          >\n            Добавить в список\n          </button>\n        </div>\n      </article>\n    );\n  }\n}\n\nexport default MovieItem;\n","import React, { Component } from \"react\";\nimport MovieItem from \"../MovieItem/MovieItem\";\nimport \"./Movies.css\";\n\nclass Movies extends Component {\n  render() {\n    if (this.props.moviesFromTop === undefined) {\n      // alert(\"no such movie found!\");\n      return (\n        <>\n          <p>Sorry, not found movie with this title </p>\n        </>\n      );\n    }\n\n    return (\n      <ul className=\"movies\">\n        {this.props.moviesFromTop.map(movie => (\n          <li className=\"movies__item\" key={movie.imdbID}>\n            <MovieItem\n              {...movie}\n              addtoFavPropLittle={() => this.props.addtoFavProp(movie)}\n            />\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default Movies;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./Favorites.css\";\n\nclass Favorites extends Component {\n  state = {\n    title: \"\",\n    serverIdForList: \"\"\n  };\n\n  setNameFavoriteList = e => {\n    this.setState({\n      title: e.target.value\n    });\n  };\n\n  sendPostQuery = () => {\n    fetch(\"https://acb-api.algoritmika.org/api/movies/list \", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        title: this.state.title,\n        movies: this.props.movies.map(m => m.imdbID)\n      })\n    })\n      .then(resp => resp.json())\n      .then(da => {\n        console.log(da);\n        this.setState({ serverIdForList: da.id });\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"favorites\">\n        <p>Назовите свой список</p>\n        <input\n          value={this.state.title}\n          className=\"favorites__name\"\n          onChange={this.setNameFavoriteList}\n        />\n        <ul className=\"favorites__list\">\n          {this.props.movies.map((item, idx) => {\n            return (\n              <li key={item.imdbID}>\n                {item.Title} ({item.Year})\n                <img\n                  onClick={() => this.props.deleteprop(idx)}\n                  src=\"#\"\n                  alt=\"Удалить\"\n                ></img>\n              </li>\n            );\n          })}\n        </ul>\n        {this.state.serverIdForList ? (\n          <Link to={`/list/${this.state.serverIdForList}`}>К списку</Link>\n        ) : (\n          <button\n            type=\"button\"\n            className=\"favorites__save\"\n            onClick={this.sendPostQuery}\n          >\n            Сохранить список\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Favorites;\n","import React, { Component } from \"react\";\nimport \"./MainPage.css\";\nimport Header from \"../../components/Header/Header\";\nimport SearchBox from \"../../components/SearchBox/SearchBox\";\nimport Movies from \"../../components/Movies/Movies\";\nimport Favorites from \"../../components/Favorites/Favorites\";\n\nclass MainPage extends Component {\n  state = {\n    searchLine: \"\",\n    movies: [],\n    favorites: []\n  };\n\n  searchLineChangeHandler = e => {\n    this.setState({ searchLine: e.target.value });\n  };\n\n  searchBoxSubmitHandler = e => {\n    e.preventDefault();\n  };\n\n  setMovies = data => {\n    this.setState({ movies: data });\n  };\n\n  onClickFunc = () => {\n    fetch(`https://www.omdbapi.com/?s=${this.state.searchLine}&apikey=fe788e11`)\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        this.setMovies(data.Search);\n      })\n      .catch(err => {\n        console.log(\"no such movie found!\");\n        // const errorserver = null;\n        // this.setMovies(errorserver);\n        // this.state.searchLine = \"\";\n        // console.log(this.state.searchLine);\n        console.log(this.state.movies);\n      });\n  };\n\n  addToFavorite = movie => {\n    // if (movie != find) {\n\n    // }\n    // this.state.favorites.find((movie) => {\n    //     movie = movie.item\n    // })\n\n    if (\n      this.state.favorites.find(movieNew => movieNew.imdbID === movie.imdbID)\n    ) {\n      return;\n    }\n\n    // почему копируем?\n    const newFav = [...this.state.favorites, movie];\n    this.setState({\n      favorites: newFav\n    });\n    console.log(newFav);\n  };\n\n  deleteFromFavorite = idx => {\n    const newArr = [...this.state.favorites];\n    newArr.splice(idx, 1);\n    this.setState({\n      favorites: newArr\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"main-page\">\n        <main className=\"main-page__content\">\n          <section className=\"main-page__main-section\">\n            <div className=\"main-page__search-box\">\n              <SearchBox\n                searchLine={this.state.searchLine}\n                onChangeProp={this.searchLineChangeHandler}\n                onClickProp={this.onClickFunc}\n              />\n            </div>\n            <div className=\"main-page__movies\">\n              <Movies\n                moviesFromTop={this.state.movies}\n                addtoFavProp={this.addToFavorite}\n              />\n            </div>\n          </section>\n          <aside className=\"main-page__favorites\">\n            <Favorites\n              movies={this.state.favorites}\n              deleteprop={this.deleteFromFavorite}\n            />\n          </aside>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default MainPage;\n","import React, { Component } from \"react\";\nimport \"./ListPage.css\";\n\nclass ListPage extends Component {\n  state = {\n    name: \"\",\n    movies: []\n  };\n  componentDidMount() {\n    const id = this.props.match.params.id;\n\n    fetch(`https://acb-api.algoritmika.org/api/movies/list/${id}`)\n      .then(resp => resp.json())\n      .then(da => {\n        console.log(da);\n        this.setState({ name: da.title });\n        const mass = da.movies.map(movie => {\n          return fetch(\n            `https://www.omdbapi.com/?i=${movie}&apikey=fe788e11`\n          ).then(res => res.json());\n        });\n        // console.log(Promise.all());\n        return Promise.all(mass);\n      })\n      .then(data => {\n        console.log(data);\n        this.setState({ movies: data });\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"list-page\">\n        <h1 className=\"list-page__title\">{this.state.name}</h1>\n        <ul>\n          {this.state.movies.map(item => {\n            return (\n              <li key={item.imdbID}>\n                <a\n                  href={`https://www.imdb.com/title/${item.imdbID}`}\n                  target=\"_blank\"\n                >\n                  <p>\n                    {\" \"}\n                    {item.Title} ({item.Year}){\" \"}\n                  </p>\n                  <img className=\"posterPic\" src={`${item.Poster}`}></img>\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default ListPage;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport MainPage from \"./pages/MainPage/MainPage\";\nimport ListPage from \"./pages/ListPage/ListPage\";\nimport Header from \"./components/Header/Header\";\nimport \"./reset.css\";\nimport \"./common.css\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <Header />\n\n        <Route path=\"/\" exact component={MainPage} />\n        <Route path=\"/list/:id\" exact component={ListPage} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}